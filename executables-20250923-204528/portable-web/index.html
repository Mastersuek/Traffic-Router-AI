<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Router - Web Interface</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .status-card { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .button { padding: 12px 24px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; }
        .button:hover { background: #0056b3; }
        .button.success { background: #28a745; }
        .button.danger { background: #dc3545; }
        .status-indicator { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; }
        .status-connected { background: #28a745; }
        .status-disconnected { background: #dc3545; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .stat-item { background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .stat-value { font-size: 24px; font-weight: bold; color: #007bff; }
        .stat-label { font-size: 12px; color: #666; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Traffic Router</h1>
            <p>–°–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π</p>
        </div>
        
        <div class="status-card">
            <h2>–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h2>
            <p><span class="status-indicator" id="statusIndicator"></span><span id="statusText">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è...</span></p>
            <p><strong>–°–µ—Ä–≤–µ—Ä:</strong> <span id="serverUrl">http://localhost:8080</span></p>
            <div style="margin-top: 15px;">
                <button class="button" onclick="connect()" id="connectBtn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
                <button class="button" onclick="testConnection()">–¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</button>
                <button class="button" onclick="openSettings()">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>
        
        <div class="status-card">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="totalRequests">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="proxiedRequests">0</div>
                    <div class="stat-label">–ß–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="directRequests">0</div>
                    <div class="stat-label">–ù–∞–ø—Ä—è–º—É—é</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgLatency">0ms</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞</div>
                </div>
            </div>
        </div>
        
        <div class="status-card">
            <h2>–ó–∞–≥—Ä—É–∑–∫–∏</h2>
            <p>–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:</p>
            <div style="margin-top: 15px;">
                <button class="button" onclick="downloadWindows()">üì• Windows (.exe)</button>
                <button class="button" onclick="downloadLinux()">üì• Linux (.AppImage)</button>
                <button class="button" onclick="downloadAndroid()">üì• Android (.apk)</button>
                <button class="button" onclick="downloadMac()">üì• macOS (.dmg)</button>
            </div>
        </div>
    </div>

    <script>
        let connected = false;
        let stats = { totalRequests: 0, proxiedRequests: 0, directRequests: 0, avgLatency: 0 };
        
        function updateUI() {
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const connectBtn = document.getElementById('connectBtn');
            
            if (connected) {
                indicator.className = 'status-indicator status-connected';
                statusText.textContent = '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ';
                connectBtn.textContent = '–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è';
                connectBtn.className = 'button danger';
            } else {
                indicator.className = 'status-indicator status-disconnected';
                statusText.textContent = '–û—Ç–∫–ª—é—á–µ–Ω–æ';
                connectBtn.textContent = '–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è';
                connectBtn.className = 'button';
            }
            
            // Update stats
            document.getElementById('totalRequests').textContent = stats.totalRequests.toLocaleString();
            document.getElementById('proxiedRequests').textContent = stats.proxiedRequests.toLocaleString();
            document.getElementById('directRequests').textContent = stats.directRequests.toLocaleString();
            document.getElementById('avgLatency').textContent = stats.avgLatency + 'ms';
        }
        
        function connect() {
            if (connected) {
                connected = false;
                alert('–û—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç Traffic Router');
            } else {
                connected = true;
                alert('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Traffic Router');
                // Simulate some stats
                stats.totalRequests = Math.floor(Math.random() * 1000);
                stats.proxiedRequests = Math.floor(stats.totalRequests * 0.7);
                stats.directRequests = stats.totalRequests - stats.proxiedRequests;
                stats.avgLatency = Math.floor(Math.random() * 100) + 50;
            }
            updateUI();
        }
        
        function testConnection() {
            alert('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º...\n\n–†–µ–∑—É–ª—å—Ç–∞—Ç: –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ\n–ó–∞–¥–µ—Ä–∂–∫–∞: 45ms');
        }
        
        function openSettings() {
            const newUrl = prompt('–í–≤–µ–¥–∏—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞:', document.getElementById('serverUrl').textContent);
            if (newUrl) {
                document.getElementById('serverUrl').textContent = newUrl;
            }
        }
        
        function downloadWindows() { alert('–ó–∞–≥—Ä—É–∑–∫–∞ Windows –≤–µ—Ä—Å–∏–∏...'); }
        function downloadLinux() { alert('–ó–∞–≥—Ä—É–∑–∫–∞ Linux –≤–µ—Ä—Å–∏–∏...'); }
        function downloadAndroid() { alert('–ó–∞–≥—Ä—É–∑–∫–∞ Android –≤–µ—Ä—Å–∏–∏...'); }
        function downloadMac() { alert('–ó–∞–≥—Ä—É–∑–∫–∞ macOS –≤–µ—Ä—Å–∏–∏...'); }
        
        // Initialize
        updateUI();
        
        // Simulate periodic updates
        setInterval(() => {
            if (connected) {
                stats.totalRequests += Math.floor(Math.random() * 5);
                stats.proxiedRequests = Math.floor(stats.totalRequests * 0.7);
                stats.directRequests = stats.totalRequests - stats.proxiedRequests;
                stats.avgLatency = Math.floor(Math.random() * 20) + 40;
                updateUI();
            }
        }, 5000);
    </script>
</body>
</html>
