{
  "monitoring": {
    "enabled": true,
    "interval": 30000,
    "healthChecks": {
      "enabled": true,
      "endpoints": [
        {
          "name": "main-app",
          "url": "http://localhost:3000/api/health",
          "timeout": 5000,
          "retries": 3
        },
        {
          "name": "ai-proxy",
          "url": "http://localhost:3001/health",
          "timeout": 5000,
          "retries": 3
        },
        {
          "name": "monitoring",
          "url": "http://localhost:3002/health",
          "timeout": 5000,
          "retries": 3
        },
        {
          "name": "youtube-cache",
          "url": "http://localhost:3003/health",
          "timeout": 5000,
          "retries": 3
        },
        {
          "name": "mcp-server",
          "url": "http://localhost:3004/health",
          "timeout": 5000,
          "retries": 3
        }
      ]
    },
    "metrics": {
      "enabled": true,
      "port": 9090,
      "path": "/metrics",
      "collectInterval": 15000,
      "retention": "30d",
      "aggregation": {
        "enabled": true,
        "intervals": ["1m", "5m", "15m", "1h", "1d"]
      },
      "customMetrics": {
        "businessMetrics": true,
        "performanceMetrics": true,
        "securityMetrics": true
      }
    },
    "alerts": {
      "enabled": true,
      "channels": [
        {
          "type": "webhook",
          "url": "${ALERT_WEBHOOK_URL}",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json"
          }
        },
        {
          "type": "email",
          "smtp": {
            "host": "${SMTP_HOST}",
            "port": 587,
            "secure": false,
            "auth": {
              "user": "${SMTP_USER}",
              "pass": "${SMTP_PASS}"
            }
          },
          "from": "${ALERT_FROM_EMAIL}",
          "to": ["${ALERT_TO_EMAIL}"]
        }
      ],
      "rules": [
        {
          "name": "service-down",
          "condition": "service_health == 0",
          "severity": "critical",
          "message": "Service {{service_name}} is down",
          "cooldown": 300000
        },
        {
          "name": "high-cpu",
          "condition": "cpu_usage > 80",
          "severity": "warning",
          "message": "High CPU usage: {{cpu_usage}}%",
          "cooldown": 600000
        },
        {
          "name": "high-memory",
          "condition": "memory_usage > 85",
          "severity": "warning",
          "message": "High memory usage: {{memory_usage}}%",
          "cooldown": 600000
        },
        {
          "name": "high-error-rate",
          "condition": "error_rate > 5",
          "severity": "warning",
          "message": "High error rate: {{error_rate}}%",
          "cooldown": 300000
        },
        {
          "name": "slow-response",
          "condition": "avg_response_time > 2000",
          "severity": "warning",
          "message": "Slow response time: {{avg_response_time}}ms",
          "cooldown": 600000
        },
        {
          "name": "disk-space-low",
          "condition": "disk_usage > 85",
          "severity": "critical",
          "message": "Low disk space: {{disk_usage}}%",
          "cooldown": 1800000
        },
        {
          "name": "connection-pool-exhausted",
          "condition": "connection_pool_usage > 90",
          "severity": "critical",
          "message": "Connection pool nearly exhausted: {{connection_pool_usage}}%",
          "cooldown": 300000
        },
        {
          "name": "cache-hit-rate-low",
          "condition": "cache_hit_rate < 70",
          "severity": "warning",
          "message": "Low cache hit rate: {{cache_hit_rate}}%",
          "cooldown": 900000
        }
      ]
    },
    "logging": {
      "level": "info",
      "file": "/var/log/traffic-router/monitoring.log",
      "maxSize": "10MB",
      "maxFiles": 10,
      "compress": true
    }
  },
  "performance": {
    "tracking": {
      "enabled": true,
      "sampleRate": 1.0,
      "slowThreshold": 1000
    },
    "profiling": {
      "enabled": false,
      "interval": 60000,
      "duration": 30000
    }
  },
  "security": {
    "rateLimiting": {
      "enabled": true,
      "windowMs": 60000,
      "max": 100,
      "message": "Too many requests"
    },
    "cors": {
      "enabled": false,
      "origin": false,
      "credentials": false
    },
    "helmet": {
      "enabled": true,
      "contentSecurityPolicy": {
        "directives": {
          "defaultSrc": ["'self'"],
          "scriptSrc": ["'self'", "'unsafe-inline'"],
          "styleSrc": ["'self'", "'unsafe-inline'"],
          "imgSrc": ["'self'", "data:", "https:"],
          "connectSrc": ["'self'", "ws:", "wss:"]
        }
      }
    }
  },
  "cache": {
    "redis": {
      "enabled": true,
      "url": "${REDIS_URL}",
      "password": "${REDIS_PASSWORD}",
      "keyPrefix": "tr:prod:",
      "ttl": 3600,
      "maxMemoryPolicy": "allkeys-lru"
    },
    "memory": {
      "enabled": true,
      "maxSize": 100,
      "ttl": 300000
    }
  },
  "database": {
    "postgresql": {
      "enabled": true,
      "url": "${DATABASE_URL}",
      "pool": {
        "min": 2,
        "max": 10,
        "idle": 10000,
        "acquire": 30000
      },
      "logging": false,
      "ssl": true
    }
  },
  "external": {
    "sentry": {
      "enabled": true,
      "dsn": "${SENTRY_DSN}",
      "environment": "production",
      "sampleRate": 0.1,
      "tracesSampleRate": 0.01
    },
    "datadog": {
      "enabled": false,
      "apiKey": "${DATADOG_API_KEY}",
      "service": "traffic-router",
      "env": "production"
    },
    "newRelic": {
      "enabled": false,
      "licenseKey": "${NEW_RELIC_LICENSE_KEY}",
      "appName": "Traffic Router Production"
    }
  }
}